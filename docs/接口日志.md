#接口日志记录设计方案

##记录场景  
* 其它方请求我方(充值请求，充值同步回调，充值异步回调，订单查询，提款请求, 提款查询，余额查询)  
* 我方请求其它方(订单查询，充值后台下单，提款请求，提款查询，余额查询)  

##记录内容
* 请求URL，请求内容，请求事件类型，请求事件key，响应内容，http响应代码，来源IP，来源URL，user agent,客户端uuid，商户id，商户名称，三方渠道名称

##设计
* 其它方请求我方的日志统一在ResponseHelper::formatOutput中集中记录
* 我方请求其它方在请求地点记录

##关键字
* 请求事件类型，每种请求对应一个类型，如充值请求=merchant_recharge_request
* 请求事件key,一般为对应主业务表唯一主键，如订单id

##关键字的获取
* 请求事件类型采用收工生成对照表方式，根据module,controller,action名称来获取
* 请求事件key,商户ID等需要在获取到表记录的地方写入全局变量,如 Yii::$app->params['order_id'] = xxx，方便在记录日志的时候获取到。